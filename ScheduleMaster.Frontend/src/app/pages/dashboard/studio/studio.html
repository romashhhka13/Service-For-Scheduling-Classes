<div class="studios-wrapper">
    <!-- HEADER –° –ö–ù–û–ü–ö–û–ô –°–û–ó–î–ê–ù–ò–Ø -->
    <div class="header">
        <h1>–ú–æ–∏ —Å—Ç—É–¥–∏–∏</h1>
        <button mat-fab color="primary" (click)="openCreateDialog()" class="create-btn"
            matTooltip="–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç—É–¥–∏—é">
            <mat-icon>add</mat-icon>
        </button>
    </div>

    <!-- –°–ü–ò–ù–ù–ï–† –ó–ê–ì–†–£–ó–ö–ò -->
    <div *ngIf="loading()" class="loading-container">
        <mat-spinner diameter="40"></mat-spinner>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—É–¥–∏–π...</p>
    </div>

    <!-- –ü–£–°–¢–û–ï –°–û–°–¢–û–Ø–ù–ò–ï -->
    <div *ngIf="!loading() && studios().length === 0" class="empty-state">
        <mat-icon class="empty-icon">school</mat-icon>
        <h3>–ù–µ—Ç —Å—Ç—É–¥–∏–π</h3>
        <p>–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é —Å—Ç—É–¥–∏—é</p>
    </div>

    <!-- –°–ü–ò–°–û–ö –°–¢–£–î–ò–ô –ö–ê–†–¢–û–ß–ö–ê–ú–ò -->
    <div class="studios-grid" *ngIf="!loading() && studios().length > 0">
        <mat-card *ngFor="let studio of studios()" class="studio-card"
            [ngClass]="studio.isLeader ? 'card-leader' : 'card-member'" [routerLink]="['/studios', studio.id]">
            <!-- –í–ï–†–•–ù–Ø–Ø –ß–ê–°–¢–¨: –†–æ–ª—å –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ -->
            <mat-card-header class="card-header">
                <div class="role-badge" [ngClass]="studio.isLeader ? 'leader' : 'member'">
                    <mat-icon>{{ studio.isLeader ? 'admin_panel_settings' : 'person' }}</mat-icon>
                </div>

                <div class="header-content">
                    <mat-card-title>{{ studio.title }}</mat-card-title>
                    <mat-card-subtitle class="role-label">
                        {{ studio.isLeader ? 'üëë –í—ã —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å' : 'üë§ –í—ã —É—á–∞—Å—Ç–Ω–∏–∫' }}
                    </mat-card-subtitle>
                </div>
            </mat-card-header>

            <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢: –ö–∞—Ç–µ–≥–æ—Ä–∏—è –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∏ -->
            <mat-card-content class="card-content">
                <div class="studio-info">
                    <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è -->
                    <div class="info-row">
                        <mat-icon class="info-icon">category</mat-icon>
                        <div class="info-text">
                            <span class="label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</span>
                            <span class="value">{{ getCategory(studio.categoryId) }}</span>
                        </div>
                    </div>

                    <!-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ -->
                    <div class="info-row">
                        <mat-icon class="info-icon">group</mat-icon>
                        <div class="info-text">
                            <span class="label">–£—á–∞—Å—Ç–Ω–∏–∫–∏</span>
                            <span class="value">{{ studio.memberCount }} —á–µ–ª–æ–≤–µ–∫</span>
                        </div>
                    </div>
                </div>
            </mat-card-content>

            <!-- –î–ï–ô–°–¢–í–ò–Ø: –£–¥–∞–ª–∏—Ç—å (—Ç–æ–ª—å–∫–æ –¥–ª—è –ª–∏–¥–µ—Ä–∞) -->
            <mat-card-actions class="card-actions" *ngIf="studio.isLeader">
                <button mat-icon-button color="warn" (click)="deleteStudio(studio.id, $event)"
                    matTooltip="–£–¥–∞–ª–∏—Ç—å —Å—Ç—É–¥–∏—é">
                    <mat-icon>delete</mat-icon>
                </button>
            </mat-card-actions>
        </mat-card>
    </div>
</div>

<!-- DIALOG –î–õ–Ø –°–û–ó–î–ê–ù–ò–Ø –°–¢–£–î–ò–ò -->
<!-- –û–Ω –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∫–ª–∏–∫–µ -->